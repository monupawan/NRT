.catalog:
  name: NRT Stack
  version: NRT-1.0.0
  description: |
    NRT Stack With All Components.
  minimum_rancher_version: v0.56.0
  maintainer: "Pawan Kumar <monu.pawan@gmail.com>"
  uuid: zk-0
  questions:
    - variable: "zk_scale"
      description: "Number of zk nodes. Note: Recommended an odd number"
      label: "Zk Nodes:"
      required: true
      default: 5
      type: "int"
    - variable: "zk_mem"
      description: "Amount of memory to config zk."
      label: "Zk Memory (mb):"
      required: true
      default: 2048 
      type: "string"
    - variable: "seed_scale"
      description: "Number of cassandra seed nodes"
      label: "Cassandra Seed Nodes:"
      required: true
      default: 2
      type: "int"
    - variable: "cassandra_scale"
      description: "Number of cassandra peer nodes"
      label: "Cassandra peer Nodes:"
      required: true
      default: 2
      type: "int"
    - variable: "jvmmem"
      description: "JVM Memory in Kb"
      label: "JVM Memory:"
      required: true
      default: 256
      type: "string"
    - variable: "maxheap"
      description: "Max Heap size in GB"
      label: "Max heap size:"
      required: true
      default: 12G
      type: "string"
    - variable: "heapsize"
      description: "Heap size in mb"
      label: "Heap size:"
      required: true
      default: 400M
      type: "string"
    - variable: "hz_scale"
      description: "Number of Hazelcast loader nodes(excluding mancenter node)"
      label: "Hz Loader Nodes(excluding mancenter):"
      required: true
      default: 1
      type: "int"
    - variable: "hz_init_frac"
      description: "CMS Initiating Occupancy Fraction"
      label: "CMS Initiating Occupancy Fraction:"
      required: true
      default: 60
      type: "int"
    - variable: "hz_max_heap_free"
      description: "Max Heap Free Ratio for Hazelcast loader"
      label: "Max Heap Free Ratio :"
      required: true
      default: 50 
      type: "int"
    - variable: "hz_min_heap_free"
      description: "Min Heap Free Ratio for Hazelcast loader"
      label: "Min Heap Free Ratio:"
      required: true
      default: 20 
      type: "int"
    - variable: "hz_heap_size"
      description: "Maximum heap size for Hazelcast loader"
      label: "Hz Heap (GB):"
      required: true
      default: 25 
      type: "string"
    - variable: "Cassandra_link"
      description: |
        Choose the Cassandra service to use. 
      label: "Casandra stack/service"
      default: "cass/cass"
      required: true
      type: "service"
    - variable: "kafka_scale"
      description: "Number of brokers nodes. Note: Recommended an odd number"
      label: "Broker Nodes:"
      required: true
      default: 3
      type: "int"
    - variable: "kafka_mem"
      description: "Amount of memory to config brokers."
      label: "Broker Memory (mb):"
      required: true
      default: 1024 
      type: "string"
    - variable: "kafka_log_dir"
      description: "Broker volume to log data"
      label: "Broker log volume:"
      required: true
      default: "/usr/local/kafka/logs"
      type: "string"
    - variable: "kafka_log_retention"
      description: "Broker log retention in hours"
      label: "Broker log retention (h):"
      required: true
      default: "168"
      type: "int"
    - variable: "kafka_num_partitions"
      description: "Number of broker partitions"
      label: "Broker partitions:"
      required: true
      default: "1"
      type: "int"
    - variable: "kafka_interval"
      description: "Interval to poll/apply configuration changes. 0 to disable" 
      label: "Broker Interval (s):"
      required: true
      default: 60 
      type: "int"
    - variable: "kafka_pub_ip"
      description: "Advertise host ip in zookeeper" 
      label: "Advertise host ip:"
      required: false
      default: false 
      type: "boolean"
    - variable: "ncm_scale"
      description: "Number of Cluster Manager nodes"
      label: "ncm Nodes:"
      required: true
      default: 1
      type: "int"
    - variable: "worker_scale"
      description: "Number of worker nodes"
      label: "worker Nodes:"
      required: true
      default: 1
      type: "int"
    - variable: "zk_link"
      description: |
        Choose the Zookeeper service to use. 
        It's really recommended a dedicated zookeeper service just for Nifi.
      label: "Zookeeper stack/service"
      default: "zookeeper/zk"
      required: true
      type: "service"
    - variable: "nimbus_scale"
      description: "Number of Nimbus nodes"
      label: "nimbus Nodes:"
      required: true
      default: 1
      type: "int"
    - variable: "supervisor_scale"
      description: "Number of supervisor nodes"
      label: "supervisor Nodes:"
      required: true
      default: 3
      type: "int"
    - variable: "ui_scale"
      description: "Number of ui nodes"
      label: "ui Nodes:"
      required: true
      default: 1
      type: "int"
    - variable: "HazelcastETL_link"
      description: |
        Choose the Hazelcast service to use. 
      label: "HazelcastETL stack/service"
      default: "HazelcastETL/Loader-ETL"
      required: true
      type: "service"
    - variable: "HazelcastNONETL_link"
      description: |
        Choose the Hazelcast service to use. 
      label: "HazelcastNONETL stack/service"
      default: "HazelcastNONETL/Loader-NONETL"
      required: true
      type: "service"
    - variable: "Kafka_link"
      description: |
        Choose the Kafka service to use. 
      label: "Kafka stack/service"
      default: "kafka/broker"
      required: true
      type: "service"
    - variable: "RabbitMq_link"
      description: |
        Choose the RabbitMq service to use. 
      label: "RabbitMq stack/service"
      default: "rabbit1"
      required: true
      type: "service"
    - variable: "Nifi_link"
      description: |
        Choose the Apache Nifi service to use. 
      label: "Nifi stack/service"
      default: "worker"
      required: true
      type: "service"
zk:
 scale: ${zk_scale}
Seed:
  scale: ${seed_scale}
  retain_ip: true
Peer:
  scale: ${cassandra_scale}
  retain_ip: true   
Hazelcast-Loader:
 scale: ${hz_scale}    
broker:
  scale: ${kafka_scale}
  retain_ip: true
  health_check:
    port: 9092
    interval: 5000
    unhealthy_threshold: 3
    request_line: ''
    healthy_threshold: 2
    response_timeout: 5000   
ncm:
 scale: ${ncm_scale}
worker:
 scale: ${worker_scale}   
nimbus:
 scale: ${nimbus_scale}
supervisor:
 scale: ${supervisor_scale}
ui:
 scale: ${ui_scale}

